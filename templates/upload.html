<!DOCTYPE html>
<html lang="fr">
{% include 'head.html' %}
<body>

    <div class="container-upload">
        <h1>Téléversement des fichiers PDF</h1>

        <form id="uploadForm">
            <div id="dropzone" class="dropzone">Déposez des fichiers PDF ici ou cliquez</div>
            <input type="file" id="fileInput" accept="application/pdf" multiple hidden>
            <ul id="fileList"></ul>
            <div class="button-group">
                <button type="button" class="btn-secondary" onclick="debugFiles()">Entrainer l'IA</button>
                <button type="button" class="btn-primary"onclick="uploadFiles()">Importer dans l'ERP</button>
            </div>
        </form>
        
    </div>

    <script>
        const dropzone = document.getElementById("dropzone");
        const fileInput = document.getElementById("fileInput");
        const fileList = document.getElementById("fileList");
        let selectedFiles = [];

        dropzone.addEventListener("click", () => fileInput.click());

        dropzone.addEventListener("dragover", (event) => {
            event.preventDefault();
            dropzone.classList.add("dragover");
        });

        dropzone.addEventListener("dragleave", () => dropzone.classList.remove("dragover"));

        dropzone.addEventListener("drop", (event) => {
            event.preventDefault();
            dropzone.classList.remove("dragover");

            handleFiles(event.dataTransfer.files);
        });

        fileInput.addEventListener("change", () => {
            handleFiles(fileInput.files);
        });

    </script>
</body>
</html>
